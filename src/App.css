@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== base reset & tokens ===== */
@layer base {
  :root{
    --bg: 15 23 42;
    --panel: 255 255 255;
    --muted: 100 116 139;
    --ring: 129 140 248;
    --brand: 99 102 241;
    --brand-600: 79 70 229;
    --shadow: 0 8px 28px rgba(2,6,23,.16);
    scrollbar-gutter: stable both-edges;
  }

  /* LIGHT THEME TOKENS */
  :root[data-theme="light"]{
    --bg: 248 250 252;
    --panel: 255 255 255;
    --muted: 71 85 105;
    --ring: 99 102 241;
    --brand: 99 102 241;
    --brand-600: 79 70 229;
    --shadow: 0 8px 28px rgba(15,23,42,.10);
  }

  html, body, #root { height: 100%; }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background:
      radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.18), transparent 60%),
      radial-gradient(900px 500px at 120% 20%, rgba(34,197,94,.10), transparent 60%),
      rgb(var(--bg));
    overflow-x: hidden;
  }

  :root[data-theme="light"] body{
    background:
      radial-gradient(1000px 520px at 10% -10%, rgba(99,102,241,.10), transparent 60%),
      radial-gradient(800px 460px at 120% 20%, rgba(34,197,94,.08), transparent 60%),
      rgb(var(--bg));
  }

  html.dragging, html.dragging * {
    cursor: grabbing !important;
    user-select: none !important;
  }
}

@layer components {
  /* tighter on phones, roomy on desktop */
  .container-page { @apply mx-auto w-full max-w-7xl px-3 sm:px-4 md:px-6 lg:px-8 box-border; }

  /* header actions: keep buttons neat across breakpoints */
  .header-actions { display:flex; gap:.5rem; align-items:center; }
  .btn-group { display:flex; gap:.5rem; }
  @media (max-width: 640px){
    .header-actions .btn { padding: .5rem .75rem; font-size: .875rem; }
  }

  .glass {
    @apply border border-white/10 rounded-xl bg-white/10 backdrop-blur-md;
    padding: .75rem;
  }
  @media (min-width: 640px){ .glass { padding: .875rem; } }
  @media (min-width: 768px){ .glass { padding: 1rem; } }

  .panel {
    @apply relative rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl;
    box-shadow: var(--shadow);
    padding: 1rem;
  }
  @media (min-width: 640px){ .panel { padding: 1.25rem; } }
  @media (min-width: 768px){ .panel { padding: 1.5rem; } }

  :root[data-theme="light"] .panel {
    background: #ffffff !important;
    border-color: rgba(15,23,42,.06) !important;
  }

  .card        { @apply rounded-xl border border-slate-200 bg-white shadow-sm transition; }
  .card-hover  { @apply hover:shadow-md hover:-translate-y-0.5; }

  .heading-1   { @apply text-3xl md:text-4xl font-extrabold tracking-tight text-white drop-shadow; margin: 0; }
  .heading-2   { @apply text-xl font-bold tracking-tight text-white/90; margin: 0; }
  :root[data-theme="light"] .heading-1 { color: #0f172a; }
  :root[data-theme="light"] .heading-2 { color: rgba(15,23,42,.9); }

  .input       { @apply w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-[rgb(var(--ring))]; }
  .select      { @apply input; }
  .badge       { @apply inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-[11px] font-medium text-slate-700; }

  .btn         { @apply inline-flex items-center justify-center rounded-lg px-3.5 py-2 text-sm font-semibold transition focus:outline-none focus:ring-2; }
  .btn-primary { @apply btn text-white; background: linear-gradient(180deg, rgb(var(--brand)), rgb(var(--brand-600))); }
  .btn-dark    { @apply btn bg-slate-900 text-white hover:bg-black; }
  .btn-ghost   { @apply btn bg-white text-slate-700 ring-1 ring-slate-300 hover:bg-slate-50; }
  .btn-danger  { @apply btn bg-rose-600 text-white hover:bg-rose-700; }

  .btn-sm      { @apply px-2.5 py-1.5 text-xs rounded-md; }
  .btn-pill    { @apply rounded-full; }
  .btn-muted   { @apply bg-slate-100 text-slate-600 ring-1 ring-slate-200; }

  .btn-primary:hover { filter: brightness(1.05); transform: translateY(-1px); }
  .btn-dark:hover    { transform: translateY(-1px); }

  .card-footer { @apply mt-3 flex items-center gap-2; }

  .sortable-card        { cursor: grab; touch-action: none; will-change: transform; }
  .sortable-card:active { cursor: grabbing; }

  .drag-overlay { width: 360px; max-width: 80vw; pointer-events: none; will-change: transform; }

  .drop-indicator { @apply h-1 rounded-full bg-indigo-300/80 mx-1; }

  .drag-handle { cursor: grab; }
  .drag-handle:active { cursor: grabbing; }

  .share-export {
    background: #fff !important;
    border-radius: 16px;
    box-shadow: 0 0 0 1px rgba(0,0,0,.06), 0 12px 28px rgba(0,0,0,.14);
  }
}

/* layout tweaks */
.day-actions { display: flex; flex-direction: column; }
.day-actions > * { width: 100%; }
@media (min-width: 1280px) {
  .day-actions { flex-direction: row; }
  .day-actions > * { width: auto; }
}

.virtual-pane {
  content-visibility: auto;
  contain-intrinsic-size: 1000px;
}

@media print {
  html, body { background: #fff !important; }
  .container-page { max-width: 100% !important; padding: 0 !important; }
  .panel { background: #fff !important; border-color: #eee !important; }
  .btn, .btn-ghost, .btn-dark, .btn-danger, .btn-primary, .day-actions, .no-print { display: none !important; }
}

/* DnD layout sanity */
ul { list-style: none; padding-left: 0; }

/* unified drag handle */
.drag-handle { cursor: grab; }
.drag-handle:active { cursor: grabbing; }
